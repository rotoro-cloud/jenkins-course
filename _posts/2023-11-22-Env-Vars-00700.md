---
layout: article
---
Для начала мне понадобится креденшилс. Перейду в Manage Jenkis -> Credentials в global есть подходящий секрет. Это Username with password для нашего агента. Имя у меня там jenkins, пароль закрыт звездочками. Давай попробуем вытащить информацию о пароле из Jenkins. Мне нужен этот длинный ID, чтобы знать, как обратиться к нему из пайплайна. Здесь это будет eedd4684-7c27-4721-ba2a-684734f117d6. Изменю пайплайн, как ты видишь. В репо файл называется Jenkinsfile-8.10-5:

```groovy
pipeline {
    agent any
    stages {
        stage('first') {
            environment {
                CRED = credentials("cred_id")
            }
            steps {
                echo "The username is ${CRED_USR}"
                echo "The password is ${CRED_PSW}"
            }
        }
    }
}
```

Я убрал вторую stage и объявил переменную окружения `CRED` на уровне `stage first`, а ее значение взял из созданной креденшилс. Чтобы использовать это, Jenkis предоставляет мне суффикс `_USR` для имени пользователя и `_PSW` для пароля. Поэтому я добавляю их к имени объявленной переменной в вывод функции `echo`.

Запустим и посмотрим вывод. Как видишь конфиденциальную информацию, которая касается пароля, Jenkis скрыл. Таким образом, чувствительная информация защищена от вывода. Если нам требуется, мы можем скрыть и имя пользователя, для этого есть настройки в креденшилс.
