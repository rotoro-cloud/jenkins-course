---
layout: article
---
Эта сборка сразу появится в дэшборде. Но что-то не так. Я нажму на зафейленый пайплайн и посмотрю логи. Как видишь, на агенте не установлен компилятор `golang`.

Эту проблему можно решить по-разному. Можно перейти в консоль и установить нужную версию `go`. Но это не то, чего я хочу. Мне хотелось бы, чтобы Jenkins сам установил нужную версию компилятора в декларативной манере.

Я опять щелкну на значок карандаша и перейду в редактор конвейера. Выберу `start`. Вот тут неприятность - мы можем настроить только агента и переменные окружения. К сожалению, красивый редактор позволяет нам выставлять в визуальном режиме только небольшое количество опций, и в этом одно из ограничений этого интерфейса.

```groovy
pipeline {
  agent any
  stages {
    stage('test') {
      steps {
        sh 'go test ./...'
      }
    }

  }
  environment {
    GO111MODULE = 'on'
  }
}
```

Идем на GitHub. Как видишь, код описания пайплайна изменился. Не хватает только блока `tools`, как ты видишь. Давай добавим его вручную. Я исправляю файл и делаю коммит из веб-интерфейса Github.

```groovy
pipeline {
  agent any
  stages {
    stage('test') {
      steps {
        sh 'go test ./...'
      }
    }

  }
  environment {
    GO111MODULE = 'on'
  }
  tools {
    go 'go-1.20'
  }
}
```

ОК, сейчас мы сделали сторонний `commit` в наш репо, и Jenkins пока ничего не знает об этом. Чтобы уведомить его, мы можем настроить веб-хук или попросить контроллер периодически сканировать репозиторий на предмет изменений.
