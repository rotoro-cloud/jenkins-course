---
layout: article
---
В основном **input** используется, если пользователю нужно что-то подтвердить. Его возможности шире, но в основном для этой цели. Мы уже видели его применение в лекции о последовательных стадиях. Там мы ожидали подтверждение для развертывания нашего артефакта для работы и работы с агентами.

В момент запроса через **input**, процесс сборки пайплайна приостанавливается. При этом он продолжает занимать рабочее пространство на агенте. Другим jobs в этот момент может быть отказано, и они уйдут в очередь. И именно эту особенность нам приходится обходить через добавление отдельного агента для каждой stage. Давай убедимся, что это действительно работает.

Скажем, мы хотели бы получить от юзера имя проекта и его версию для последующего деплоя. Пока пользователь думает, мы не хотели бы выделять сборочный процесс.

Вот здесь пример применения input с параметрами (`Jenkinsfile-8.35-2`):

```
pipeline {
    agent none
    stages {
        stage('first') {
            agent any
            input {
                message "Please input fields below"
                ok "Submit"
                parameters {
                    string defaultValue: 'Phoenix', description: 'Input the project ID', name: 'project_id'
                    choice choices: ['1.0', '1.1', '1.2'], description: 'Select the version', name: 'project_version'
                }
            }
            steps {
                sleep 10
                echo "project is ${params.project_id}"
                echo "version is ${params.project_version}"
            }
        }
    }
}
```

Здесь `input` приготовлен правильно, поскольку значение глобального агента в `none`. Таким образом, при запуске конвейера в stage сначала исполнится input, он запросит параметры, и после этого будет выполнена директива `agents any`, которая аллоцирует агента для исполнения.

Чтобы убедиться в этом, я запущу пайплайн. Если внимательно посмотреть на билд #5, то видно что он поставлен на паузу. В логах мы не найдем сообщение, о том, что ему выделен executor и что он передался на агента. 

Кликну на сборке и введу параметры.Зайду в консоль билда и введу данные. Теперь мы видим, что пошло исполнение.

Ок, и это все, увидимся!
