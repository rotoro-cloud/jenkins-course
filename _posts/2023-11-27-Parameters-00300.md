---
layout: article
---
Теперь попробуем это же в пайплайне. После создания `pipeline job` мы можем добавить это из UI, подобно тому, как делали в freestyle. Но я хочу, чтобы это работало из Jenkinsfile.

У меня есть заготовка для описания этого конвейера, и я вставлю ее в поле `script`:

```
pipeline {
    agent any
    stages {
        stage('first') {
            steps {
            }
        }
    }
}
```

Но как описать эти параметры? Что, если я их не помню?

Я перехожу в `Pipeline Syntax`, слева выбираю `Declarative Directive Generator`. Там в списке `Sample Directive` ищу `Parameters`. Дальше жму на `Add` и выбираю `string`, поскольку `project_id` у нас был строкой в предыдущем примере. Здесь, как и в прошлый раз я заполню название, значение по умолчанию и описание. После этого нажму `Generate Declarative Directive`. Ниже появится код, который нужно вставить в pipeline.

```
pipeline {
    agent any
    parameters {
        string defaultValue: 'Phoenix', description: 'Input the project ID', name: 'project_id'
    }
    stages {
        stage('first') {
            steps {
                echo "project is ${params.project_id}"
            }
        }
    }
}
```

Запустим на выполнение. Обрати внимание, что в первый раз кнопка была `Build Now`, а система не запросила от нас параметров. Это из-за того, что мы не устанавливали параметры вручную, а сделали это через Jenkinsfile. При последующих сборках это поведение изменится, и параметры станут запрашиваться.

С этими параметрами есть еще один момент. Если мы инициируем билд вручную, то Jenkins запросит данные у нас. Но бывает, что билд создается автоматически, например по триггеру. Тогда значения будут использованы как дефолтные, без запроса у пользователя. Мы уже скоро поговорим о цепочках билдов и триггерах.
