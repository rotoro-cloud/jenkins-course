---
layout: article
---
Ок, давай это запустим. В качестве предварительных условий, у нас на агенте должен быть установлен Docker.

Вызовем эту функцию в нашем пайплайне. Сначала я создам кределшилс с именем пользователя и паролем. Я могу сюда написать, что угодно, поскольку моя функция всегда завершается хорошо, даже если логин неудачный.

Теперь добавлю вызов в наш пайплайн.

```
@Library('custom-docker-lib') _
pipeline {
    agent any
    stages {
        stage('pull') {
            steps {
                dockerPull('log-generator', 'rotorocloud')
            }
        }
    }
}
```

Как видишь я поместил в steps вызов своей функции `dockerPull`, передав туда два требуемых аргумента. Запущу билд и проверю логи. Если мы посмотрим в начало, то увидим, что на агент была загружена наша библиотека из github-репо. Далее все как мы предполагали - исполняются команды, указанные в библиотечной функции.

Как я сказал, на то, что команда `docker login` падает не стоит обращать внимания. Если ты добавишь актуальные данные в credentials, это уйдет. Образ `log-generator` публичный и он скачивается кем угодно.

Ок, чтобы писать такие функции тебе придется подучить Groovy и создать структуру репо, как указано в документации. Если пока это кажется сложным - не переживай. На этапе знакомства с Jenkins достаточно знать об этой возможности и не бояться её.

Надеюсь это было интересно, увидимся.
