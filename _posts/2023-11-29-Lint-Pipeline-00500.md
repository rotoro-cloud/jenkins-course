---
layout: article
---

```
vi Jenkinsfile

pipeline {
    agent { label 'no-agent' }

    stages {
        stage('Hello') {
            steps {
                echo 'Hello World'
            }
        }
    }
}

```

Я меняю настройки агента на то, чтобы он искал по метке, которой не существует в моей системе. Сохраню и пошлю на проверку. Как видишь, он не нашел ошибок. Это потому, что линтер проверяет корректность декларативной нотации. Т.е. он найдет, если я ошибся в синтаксисе или где-то не полностью дописал нужный параметр. Но вот логику пайплайна он, к сожалению, не проверяет. Он лишь гарантирует, что скрипт будет принят, а вот как он будет исполнен и будет ли исполнен вообще, его не интересует.

Также имей в виду, что эта штука иногда бывает не очень информативная. Вот перед тобой частый кейс ошибки при импорте библиотеки:

```
@Library('custom-docker-lib')
pipeline { 
    agent { label 'no-agent' }

    stages {
        stage('Hello') {
            steps {
                echo 'Hello World'
            }
        }
    }
}
```

Обрати внимание, что после импорта библиотеки `custom-docker-lib` должен идти пробел и символ подчеркивания. Запущу линтирование.

```
Errors encountered validating Jenkinsfile:
WorkflowScript: 2: unexpected token: pipeline @ line 2, column 1.
   pipeline {
   ^

```

Как видишь, линтер свое дело сделал - ошибка обнаружена, но вот указывает он совсем не на ту строку, где она находится. Просто имей в виду, что этот линтер может ошибаться.

Я добавлю подчеркивание, т.е. сделаю так, как это должно быть. Снова проверю - теперь все в порядке.

Ок, это все, увидимся!
