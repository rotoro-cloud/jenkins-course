---
layout: article
---
Мы можем избрать один из общепринятых подходов, например делать полные резервные копии и добавить к инкрементальные бэкапы или дифференциальные бэкапы.

Все эти разные подходы к резервного копирования будут работать с Jenkins, с т.е. самой его системой, а также с заданиями, что в нем исполняются.

Но желание забэкапить всё и сразу может быть трудно осуществимо.

У нас может быть множество агентов, в которых исполняются разные нагрузки, и нереально сохранить их все.

Тогда, что бэкапить в первую очередь?

Все зависит от того, какие цели мы преследуем.

Первый вариант - это `Disaster recovery`, т.е. произошла авария и нам нужна полностью рабочая система. Это сервера данные с контроллера Jenkins, с его агентов, возможно какая-то часть, которая описывает инфраструктуру под это.

Второй момент, если у нас сломалась конфигурация, а мы этого сразу не заметили. Jenkins работает так, что подобные проблемы могут обнаружиться только после его перезагрузки, которая может наступить очень нескоро.

Третий случай, если мы удалили какой-то важный файл, скажем плагин, без которого все встанет, а обновить его в силу каких-то причин нельзя.

По моему опыту второй и третий варианты случаются чаще, чем первый, когда мы лишаемся всего и сразу.

Имей в виду, что то, что находится на агентах, это не результаты работы конвейеров. Это лишь среды для сборки и кэшированные файлы. Ими обычно можно пожертвовать. Еще есть такие вещи, как плагины, которые можно легко восстановить. Но это не всегда подходит, и для случая аварийного восстановления я бы их оставил.

Ок, здесь мы подходим к вопросу, что самое главное, что нужно бэкапить в Jenkins, это не рабочие нагрузки, исполняемые агентами, а каталог с сервера-контроллера `$JENKINS_HOME`.
