---
layout: article
---
`Multi-configuration project` представляет другой взгляд на реализации нескольких сред. С помощью этой сущности можно настроить несколько этапов, в которых будут выполняться разные команды и использоваться разные переменные окружения, в зависимости от того, какая фаза пайплайна сейчас исполняется. Для работы потребуется плагин `Matrix Project`.

Этот подход не такой гибкий, а сам конвейер нельзя сохранить в виде Jenkinsfile. Это минус. Но здесь не требуется знать Groovy и можно все накликать мышкой в UI. Это удобно, когда у тебя не очень сложный конвейер, который нужно раскатывать в большое количество похожих окружений.

Например, твой Jenkins собирает пакет для OC Linux. Тебе нужно делать это для 3-х дистрибутивов. Для каждого пакета нужно сделать одинаковых 3 действия: 
- сгенерировать мета-данные в определенном формате
- скопировать исполняемые файлы и скрипты
- упаковать все в пакет, подходящий для этого дистро
- - и опционально подписать его для CentOS.

Эти стадии очень похожи. Соответственно похожи будут и сами действия, которые происходят в задании. Мы можем использовать единый шаблон задания для всего этого, определив его как **multi-configuration project**. Чтобы пайплайн понимал, какой пакет ему сейчас собирать и нужно ли запускать дополнительные функции, мы укажем это через переменные окружения, которые будут отличаться для разных семейств ОС.

Мы можем разложить файлы по каталогам для отдельных ОС, и настроить это так, чтобы при выполнении определенного шага билда, система сборки вроде `maven` делала дополнительные действия, например подписывала пакет, а в сам пакет при сборке копировались отдельные скрипты и конфигурационные файлы, которые подходят именно для этой операционной системы.
