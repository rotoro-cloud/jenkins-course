---
layout: article
---
В качестве предварительного условия, у нас как и раньше есть агент сборки, и это прежний `ubuntu-agent01`, без него никак. Мы, как и прежде, будем подключаться к нему из Jenkins. Дополнительно я установил на него контейнерный рантайм, а именно Docker. Также, на хосте Jenkins, нам нужен плагин `Docker pipeline`. Имея все это мы готовы создать job. 

Как обычно мы заходим в Jenkins, там создаем `item` с типом `pipeline`, а далее вставляем этот Jenkinsfile в поле `Script`. Но в этот раз мы не копируем этот файл, а заберем его с github. Мы уже так делали, когда создавали пайплайны. Как ты помнишь, Jenkinsfile можно хранить в репозитории, рядом с кодом.

Репозиторий: `https://github.com/rotoro-cloud/go-webapp-sample.git`
Ветка: `/jenkinsfiles`
Jenkinsfile: **`Jenkinsfile-6.40-1`.**

Сохраним, запустим на сборку и сразу откроем логи. Как видишь, наш агент `ubuntu-agent01` запускает контейнер из указанного образа, клонирует репо, тестирует приложение, а после проверяет версию go и пишет сообщение, что тестирование происходит на версии go 1.19. 

Замечательно! Теперь мы можем собирать наши приложения используя все преимущества Docker. Теперь давай усложним задачу и добавим вторую stage, где будет произведена сборка нашего файла.
